{"ast":null,"code":"var _jsxFileName = \"/home/debian/est-fanverse/client/src/pages/DaoPage.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { createProposal, getProposals, voteOnProposal } from \"../utils/dao\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction DaoPage() {\n  _s();\n  const [description, setDescription] = useState(\"\");\n  const [proposals, setProposals] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const fetchProposals = async () => {\n    try {\n      const result = await getProposals();\n      setProposals(result);\n    } catch (err) {\n      console.error(\"Erreur r√©cup√©ration proposals\", err);\n    }\n  };\n  const handleCreateProposal = async () => {\n    if (!description) return;\n    setLoading(true);\n    try {\n      await createProposal(description);\n      setDescription(\"\");\n      await fetchProposals();\n    } catch (err) {\n      alert(\"Erreur DAO c√¥t√© client !\");\n      console.error(err);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleVote = async id => {\n    setLoading(true);\n    try {\n      await voteOnProposal(id);\n      await fetchProposals();\n    } catch (err) {\n      alert(\"Erreur lors du vote !\");\n      console.error(err);\n    } finally {\n      setLoading(false);\n    }\n  };\n  useEffect(() => {\n    fetchProposals();\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      padding: \"2rem\",\n      fontFamily: \"sans-serif\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      children: \"\\uD83D\\uDDF3\\uFE0F Espace DAO \\u2014 EST FanVerse\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 52,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        marginBottom: \"2rem\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"\\uD83D\\uDCDD Cr\\xE9er une proposition\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        value: description,\n        placeholder: \"Proposition\",\n        onChange: e => setDescription(e.target.value),\n        style: {\n          padding: \"0.5rem\",\n          width: \"60%\"\n        }\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 56,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleCreateProposal,\n        style: {\n          marginLeft: \"1rem\",\n          padding: \"0.5rem 1rem\",\n          backgroundColor: \"#e60000\",\n          color: \"white\",\n          border: \"none\",\n          borderRadius: \"5px\"\n        },\n        disabled: loading,\n        children: \"\\u2795 Cr\\xE9er\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"\\uD83D\\uDCCB Propositions\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 9\n      }, this), proposals.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Aucune proposition pour le moment.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 11\n      }, this) : /*#__PURE__*/_jsxDEV(\"ul\", {\n        children: proposals.map((p, i) => /*#__PURE__*/_jsxDEV(\"li\", {\n          style: {\n            marginBottom: \"1rem\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: [\"#\", p.id.toString(), \":\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 87,\n            columnNumber: 17\n          }, this), \" \", p.description, \" \\u2014 \\uD83D\\uDDF3\\uFE0F \", p.votes.toString(), \" votes\", /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleVote(Number(p.id)),\n            style: {\n              marginLeft: \"1rem\",\n              padding: \"0.3rem 0.8rem\",\n              backgroundColor: \"#007bff\",\n              color: \"white\",\n              border: \"none\",\n              borderRadius: \"5px\"\n            },\n            disabled: loading,\n            children: \"\\uD83D\\uDDF3\\uFE0F Voter\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 17\n          }, this)]\n        }, i, true, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 5\n  }, this);\n}\n_s(DaoPage, \"aLcYAQwvtK48IVhv/JxoErzCx5k=\");\n_c = DaoPage;\nexport default DaoPage;\nvar _c;\n$RefreshReg$(_c, \"DaoPage\");","map":{"version":3,"names":["React","useState","useEffect","createProposal","getProposals","voteOnProposal","jsxDEV","_jsxDEV","DaoPage","_s","description","setDescription","proposals","setProposals","loading","setLoading","fetchProposals","result","err","console","error","handleCreateProposal","alert","handleVote","id","style","padding","fontFamily","children","fileName","_jsxFileName","lineNumber","columnNumber","marginBottom","type","value","placeholder","onChange","e","target","width","onClick","marginLeft","backgroundColor","color","border","borderRadius","disabled","length","map","p","i","toString","votes","Number","_c","$RefreshReg$"],"sources":["/home/debian/est-fanverse/client/src/pages/DaoPage.tsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { createProposal, getProposals, voteOnProposal } from \"../utils/dao\";\n\nfunction DaoPage() {\n  const [description, setDescription] = useState(\"\");\n  const [proposals, setProposals] = useState<any[]>([]);\n  const [loading, setLoading] = useState(false);\n\n  const fetchProposals = async () => {\n    try {\n      const result = await getProposals();\n      setProposals(result);\n    } catch (err) {\n      console.error(\"Erreur r√©cup√©ration proposals\", err);\n    }\n  };\n\n  const handleCreateProposal = async () => {\n    if (!description) return;\n    setLoading(true);\n    try {\n      await createProposal(description);\n      setDescription(\"\");\n      await fetchProposals();\n    } catch (err) {\n      alert(\"Erreur DAO c√¥t√© client !\");\n      console.error(err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleVote = async (id: number) => {\n    setLoading(true);\n    try {\n      await voteOnProposal(id);\n      await fetchProposals();\n    } catch (err) {\n      alert(\"Erreur lors du vote !\");\n      console.error(err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchProposals();\n  }, []);\n\n  return (\n    <div style={{ padding: \"2rem\", fontFamily: \"sans-serif\" }}>\n      <h1>üó≥Ô∏è Espace DAO ‚Äî EST FanVerse</h1>\n\n      <div style={{ marginBottom: \"2rem\" }}>\n        <h2>üìù Cr√©er une proposition</h2>\n        <input\n          type=\"text\"\n          value={description}\n          placeholder=\"Proposition\"\n          onChange={(e) => setDescription(e.target.value)}\n          style={{ padding: \"0.5rem\", width: \"60%\" }}\n        />\n        <button\n          onClick={handleCreateProposal}\n          style={{\n            marginLeft: \"1rem\",\n            padding: \"0.5rem 1rem\",\n            backgroundColor: \"#e60000\",\n            color: \"white\",\n            border: \"none\",\n            borderRadius: \"5px\"\n          }}\n          disabled={loading}\n        >\n          ‚ûï Cr√©er\n        </button>\n      </div>\n\n      <div>\n        <h2>üìã Propositions</h2>\n        {proposals.length === 0 ? (\n          <p>Aucune proposition pour le moment.</p>\n        ) : (\n          <ul>\n            {proposals.map((p, i) => (\n              <li key={i} style={{ marginBottom: \"1rem\" }}>\n                <strong>#{p.id.toString()}:</strong> {p.description} ‚Äî üó≥Ô∏è {p.votes.toString()} votes\n                <button\n                  onClick={() => handleVote(Number(p.id))}\n                  style={{\n                    marginLeft: \"1rem\",\n                    padding: \"0.3rem 0.8rem\",\n                    backgroundColor: \"#007bff\",\n                    color: \"white\",\n                    border: \"none\",\n                    borderRadius: \"5px\"\n                  }}\n                  disabled={loading}\n                >\n                  üó≥Ô∏è Voter\n                </button>\n              </li>\n            ))}\n          </ul>\n        )}\n      </div>\n    </div>\n  );\n}\n\nexport default DaoPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}