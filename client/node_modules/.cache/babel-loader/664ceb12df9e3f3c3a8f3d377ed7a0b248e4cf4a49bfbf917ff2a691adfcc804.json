{"ast":null,"code":"import { ethers } from \"ethers\";\n\n// Adresse du contrat FanToken (déployé via Hardhat)\nexport const fanTokenAddress = \"0x5FbDB2315678afecb367f032d93F642f64180aa3\";\n\n// ABI typique complète d'un contrat ERC20 (simplifiée mais fiable)\nexport const fanTokenAbi = [{\n  \"constant\": true,\n  \"inputs\": [{\n    \"name\": \"owner\",\n    \"type\": \"address\"\n  }],\n  \"name\": \"balanceOf\",\n  \"outputs\": [{\n    \"name\": \"\",\n    \"type\": \"uint256\"\n  }],\n  \"type\": \"function\",\n  \"stateMutability\": \"view\"\n}, {\n  \"constant\": true,\n  \"inputs\": [],\n  \"name\": \"symbol\",\n  \"outputs\": [{\n    \"name\": \"\",\n    \"type\": \"string\"\n  }],\n  \"type\": \"function\",\n  \"stateMutability\": \"view\"\n}, {\n  \"constant\": true,\n  \"inputs\": [],\n  \"name\": \"name\",\n  \"outputs\": [{\n    \"name\": \"\",\n    \"type\": \"string\"\n  }],\n  \"type\": \"function\",\n  \"stateMutability\": \"view\"\n}, {\n  \"constant\": true,\n  \"inputs\": [],\n  \"name\": \"decimals\",\n  \"outputs\": [{\n    \"name\": \"\",\n    \"type\": \"uint8\"\n  }],\n  \"type\": \"function\",\n  \"stateMutability\": \"view\"\n}];\nexport const getTokenBalance = async account => {\n  if (!window.ethereum) return null;\n  const provider = new ethers.BrowserProvider(window.ethereum);\n  const signer = await provider.getSigner();\n  const contract = new ethers.Contract(fanTokenAddress, fanTokenAbi, signer);\n  const balance = await contract.balanceOf(account);\n  const symbol = await contract.symbol();\n  return {\n    balance: ethers.formatUnits(balance, 18),\n    symbol\n  };\n};","map":{"version":3,"names":["ethers","fanTokenAddress","fanTokenAbi","getTokenBalance","account","window","ethereum","provider","BrowserProvider","signer","getSigner","contract","Contract","balance","balanceOf","symbol","formatUnits"],"sources":["/home/debian/est-fanverse/client/src/utils/contract.ts"],"sourcesContent":["import { ethers } from \"ethers\";\n\n// Adresse du contrat FanToken (déployé via Hardhat)\nexport const fanTokenAddress = \"0x5FbDB2315678afecb367f032d93F642f64180aa3\";\n\n// ABI typique complète d'un contrat ERC20 (simplifiée mais fiable)\nexport const fanTokenAbi = [\n  {\n    \"constant\": true,\n    \"inputs\": [{ \"name\": \"owner\", \"type\": \"address\" }],\n    \"name\": \"balanceOf\",\n    \"outputs\": [{ \"name\": \"\", \"type\": \"uint256\" }],\n    \"type\": \"function\",\n    \"stateMutability\": \"view\"\n  },\n  {\n    \"constant\": true,\n    \"inputs\": [],\n    \"name\": \"symbol\",\n    \"outputs\": [{ \"name\": \"\", \"type\": \"string\" }],\n    \"type\": \"function\",\n    \"stateMutability\": \"view\"\n  },\n  {\n    \"constant\": true,\n    \"inputs\": [],\n    \"name\": \"name\",\n    \"outputs\": [{ \"name\": \"\", \"type\": \"string\" }],\n    \"type\": \"function\",\n    \"stateMutability\": \"view\"\n  },\n  {\n    \"constant\": true,\n    \"inputs\": [],\n    \"name\": \"decimals\",\n    \"outputs\": [{ \"name\": \"\", \"type\": \"uint8\" }],\n    \"type\": \"function\",\n    \"stateMutability\": \"view\"\n  }\n];\n\nexport const getTokenBalance = async (account: string) => {\n  if (!window.ethereum) return null;\n\n  const provider = new ethers.BrowserProvider(window.ethereum);\n  const signer = await provider.getSigner();\n  const contract = new ethers.Contract(fanTokenAddress, fanTokenAbi, signer);\n\n  const balance = await contract.balanceOf(account);\n  const symbol = await contract.symbol();\n  return { balance: ethers.formatUnits(balance, 18), symbol };\n};"],"mappings":"AAAA,SAASA,MAAM,QAAQ,QAAQ;;AAE/B;AACA,OAAO,MAAMC,eAAe,GAAG,4CAA4C;;AAE3E;AACA,OAAO,MAAMC,WAAW,GAAG,CACzB;EACE,UAAU,EAAE,IAAI;EAChB,QAAQ,EAAE,CAAC;IAAE,MAAM,EAAE,OAAO;IAAE,MAAM,EAAE;EAAU,CAAC,CAAC;EAClD,MAAM,EAAE,WAAW;EACnB,SAAS,EAAE,CAAC;IAAE,MAAM,EAAE,EAAE;IAAE,MAAM,EAAE;EAAU,CAAC,CAAC;EAC9C,MAAM,EAAE,UAAU;EAClB,iBAAiB,EAAE;AACrB,CAAC,EACD;EACE,UAAU,EAAE,IAAI;EAChB,QAAQ,EAAE,EAAE;EACZ,MAAM,EAAE,QAAQ;EAChB,SAAS,EAAE,CAAC;IAAE,MAAM,EAAE,EAAE;IAAE,MAAM,EAAE;EAAS,CAAC,CAAC;EAC7C,MAAM,EAAE,UAAU;EAClB,iBAAiB,EAAE;AACrB,CAAC,EACD;EACE,UAAU,EAAE,IAAI;EAChB,QAAQ,EAAE,EAAE;EACZ,MAAM,EAAE,MAAM;EACd,SAAS,EAAE,CAAC;IAAE,MAAM,EAAE,EAAE;IAAE,MAAM,EAAE;EAAS,CAAC,CAAC;EAC7C,MAAM,EAAE,UAAU;EAClB,iBAAiB,EAAE;AACrB,CAAC,EACD;EACE,UAAU,EAAE,IAAI;EAChB,QAAQ,EAAE,EAAE;EACZ,MAAM,EAAE,UAAU;EAClB,SAAS,EAAE,CAAC;IAAE,MAAM,EAAE,EAAE;IAAE,MAAM,EAAE;EAAQ,CAAC,CAAC;EAC5C,MAAM,EAAE,UAAU;EAClB,iBAAiB,EAAE;AACrB,CAAC,CACF;AAED,OAAO,MAAMC,eAAe,GAAG,MAAOC,OAAe,IAAK;EACxD,IAAI,CAACC,MAAM,CAACC,QAAQ,EAAE,OAAO,IAAI;EAEjC,MAAMC,QAAQ,GAAG,IAAIP,MAAM,CAACQ,eAAe,CAACH,MAAM,CAACC,QAAQ,CAAC;EAC5D,MAAMG,MAAM,GAAG,MAAMF,QAAQ,CAACG,SAAS,CAAC,CAAC;EACzC,MAAMC,QAAQ,GAAG,IAAIX,MAAM,CAACY,QAAQ,CAACX,eAAe,EAAEC,WAAW,EAAEO,MAAM,CAAC;EAE1E,MAAMI,OAAO,GAAG,MAAMF,QAAQ,CAACG,SAAS,CAACV,OAAO,CAAC;EACjD,MAAMW,MAAM,GAAG,MAAMJ,QAAQ,CAACI,MAAM,CAAC,CAAC;EACtC,OAAO;IAAEF,OAAO,EAAEb,MAAM,CAACgB,WAAW,CAACH,OAAO,EAAE,EAAE,CAAC;IAAEE;EAAO,CAAC;AAC7D,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}